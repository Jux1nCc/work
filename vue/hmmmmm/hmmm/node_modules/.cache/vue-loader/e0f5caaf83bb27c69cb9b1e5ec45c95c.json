{"remainingRequest":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\login\\register.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\login\\register.vue","mtime":1593747421908},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQgeyBnZXRQaG9uZUNvZGUsIHJlZ2lzdGVyIH0gZnJvbSAiQC9hcGkvcmVnaXN0ZXIiOw0KZXhwb3J0IGRlZmF1bHQgew0KICBkYXRhKCkgew0KICAgIHJldHVybiB7DQogICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMLA0KICAgICAgaW1hZ2VVcmw6ICIiLA0KICAgICAgY29kZVVybDogcHJvY2Vzcy5lbnYuVlVFX0FQUF9VUkwgKyAiL2NhcHRjaGE/dHlwZT1zZW5kc21zIiwNCiAgICAgIHRvdGFsVGltZTogNjAsDQogICAgICBmb3JtOiB7DQogICAgICAgIGF2YXRhcjogIiIsDQogICAgICAgIHVzZXJuYW1lOiAiIiwNCiAgICAgICAgZW1haWw6ICIiLA0KICAgICAgICBwaG9uZTogIiIsDQogICAgICAgIHBhc3N3b3JkOiAiIiwNCiAgICAgICAgY29kZTogIiIsDQogICAgICAgIHJjb2RlOiAiIg0KICAgICAgfSwNCiAgICAgIC8vIOmqjOivgeinhOWImQ0KICAgICAgcnVsZXM6IHsNCiAgICAgICAgdXNlcm5hbWU6IFsNCiAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAi6K+36L6T5YWl5pi156ewIiwgdHJpZ2dlcjogImNoYW5nZSIgfQ0KICAgICAgICBdLA0KICAgICAgICBwaG9uZTogWw0KICAgICAgICAgIHsgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXmiYvmnLrlj7ciLCB0cmlnZ2VyOiAiY2hhbmdlIiB9LA0KICAgICAgICAgIC8vICDoh6rlrprkuYnop4TliJnpqozor4ENCiAgICAgICAgICB7DQogICAgICAgICAgICB2YWxpZGF0b3I6IChydWxlLCB2YWx1ZSwgY2FsbGJhY2spID0+IHsNCiAgICAgICAgICAgICAgbGV0IF9kZWcgPSAvXigwfDg2fDE3OTUxKT8oMTNbMC05XXwxNVswMTIzNTY3ODldfDE2NnwxN1szNjc4XXwxOFswLTldfDE0WzU3XSlbMC05XXs4fSQvOw0KICAgICAgICAgICAgICBpZiAoX2RlZy50ZXN0KHZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soIuivt+i+k+WFpeato+ehrueahOaJi+acuuWPtyIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIGVtYWlsOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpemCrueusSIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGxldCBfZGVnID0gL1x3KyhbLSsuXVx3KykqQFx3KyhbLS5dXHcrKSpcLlx3KyhbLS5dXHcrKSovOw0KICAgICAgICAgICAgICBpZiAoX2RlZy50ZXN0KHZhbHVlKSkgew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCk7DQogICAgICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICAgICAgY2FsbGJhY2soIuivt+i+k+WFpeato+ehrueahOmCrueuseagvOW8jyIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9DQogICAgICAgIF0sDQogICAgICAgIHBhc3N3b3JkOiBbDQogICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0sDQogICAgICAgICAgew0KICAgICAgICAgICAgdmFsaWRhdG9yOiAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7DQogICAgICAgICAgICAgIGxldCBfZGVnID0gL15cdyskLzsNCiAgICAgICAgICAgICAgaWYgKF9kZWcudGVzdCh2YWx1ZSkpIHsNCiAgICAgICAgICAgICAgICBjYWxsYmFjaygpOw0KICAgICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgIGNhbGxiYWNrKCLlr4bnoIHlj6rog73nlLHoi7Hmlocs5pWw5a2XLOS4i+WIkue6v+e7hOaIkCIpOw0KICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9LA0KICAgICAgICAgICAgdHJpZ2dlcjogImNoYW5nZSINCiAgICAgICAgICB9LA0KICAgICAgICAgIHsgbWluOiA2LCBtYXg6IDEyLCBtZXNzYWdlOiAi6K+36L6T5YWlNi0xMuS9jeWvhueggSIsIHRyaWdnZXI6ICJjaGFuZ2UiIH0NCiAgICAgICAgXSwNCiAgICAgICAgYXZhdGFyOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+S4iuS8oOWktOWDjyIsIHRyaWdnZXI6ICJjaGFuZ2UiIH1dLA0KICAgICAgICBjb2RlOiBbeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogIuivt+i+k+WFpeWbvuW9oueggSIsIHRyaWdnZXI6ICJjaGFuZ2UiIH1dLA0KICAgICAgICByY29kZTogW3sgcmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICLor7fovpPlhaXpqozor4HnoIEiLCB0cmlnZ2VyOiAiY2hhbmdlIiB9XQ0KICAgICAgfQ0KICAgIH07DQogIH0sDQogICAgd2F0Y2g6IHsNCiAgICAgIGRpYWxvZ1Zpc2libGUobmV3VmFsKSB7DQogICAgICAgIGlmIChuZXdWYWwgPT0gZmFsc2UpIHsNCiAgICAgICAgICB0aGlzLiRyZWZzLmZvcm0ucmVzZXRGaWVsZHMoKTsNCiAgICAgICAgICB0aGlzLmltYWdlVXJsID0gIiI7DQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICBtZXRob2RzOiB7DQogICAgaGFuZGxlQXZhdGFyU3VjY2VzcyhyZXMpIHsNCiAgICAgIHRoaXMuaW1hZ2VVcmwgPSB0aGlzLmJhc2VVUkwgKyAiLyIgKyByZXMuZGF0YS5maWxlX3BhdGg7DQogICAgICB0aGlzLmZvcm0uYXZhdGFyID0gcmVzLmRhdGEuZmlsZV9wYXRoOw0KICAgICAgLy8gIOagueaNruWktOWDj+aYr+WQpuS4iuS8oOadpeWIpOaWreaYr+WQpuaYvuekuuaPkOekug0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlRmllbGQoImF2YXRhciIpOw0KICAgICAgLy8gY29uc29sZS5sb2cocmVzKTsNCiAgICB9LA0KICAgIGJlZm9yZUF2YXRhclVwbG9hZChmaWxlKSB7DQogICAgICBjb25zdCBpc0pQRyA9DQogICAgICAgIGZpbGUudHlwZSA9PT0gImltYWdlL2pwZWciIHx8DQogICAgICAgIGZpbGUudHlwZSA9PT0gImltYWdlL3BuZyIgfHwNCiAgICAgICAgZmlsZS50eXBlID09PSAiaW1hZ2UvZ2lmIjsNCiAgICAgIGNvbnN0IGlzTHQyTSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgMjsNCiAgICAgIGlmICghaXNKUEcpIHsNCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi5LiK5Lyg5aS05YOP5Zu+54mH5Y+q6IO95pivIEpQRyDmoLzlvI8hIik7DQogICAgICB9DQogICAgICBpZiAoIWlzTHQyTSkgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCLkuIrkvKDlpLTlg4/lm77niYflpKflsI/kuI3og73otoXov4cgMk1CISIpOw0KICAgICAgfQ0KICAgICAgcmV0dXJuIGlzSlBHICYmIGlzTHQyTTsNCiAgICB9LA0KICAgIGNoYW5nZUltZygpIHsNCiAgICAgIHRoaXMuY29kZVVybCA9DQogICAgICAgIHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMICsgIi9jYXB0Y2hhP3R5cGU9bG9naW4mdD0iICsgRGF0ZS5ub3coKTsNCiAgICB9LA0KICAgIHN1Ym1pdCgpIHsNCiAgICAgIHRoaXMuJHJlZnMuZm9ybS52YWxpZGF0ZSh2YWxpZCA9PiB7DQogICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyh2YWxpZCk7DQogICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgIC8vICDosIPnlKjlj5HpgIHor7fmsYLmlrnms5UNCiAgICAgICAgICByZWdpc3Rlcih0aGlzLmZvcm0pLnRoZW4oKCkgPT4gew0KICAgICAgICAgICAgLy8gd2luZG93LmNvbnNvbGUubG9nKHJlcyk7DQogICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuazqOWGjOaIkOWKnyEiKTsNCiAgICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICAgIH0pOw0KICAgICAgICB9DQogICAgICB9KTsNCiAgICB9LA0KICAgIGdldENvZGUoKSB7DQogICAgICBsZXQgX3Bhc3MgPSB0cnVlOw0KICAgICAgdGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlRmllbGQoWyJjb2RlIiwgInBob25lIl0sIGVycm9yID0+IHsNCiAgICAgICAgaWYgKGVycm9yICE9ICIiKSB7DQogICAgICAgICAgX3Bhc3MgPSBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgfSk7DQogICAgICBpZiAoX3Bhc3MgPT0gZmFsc2UpIHsNCiAgICAgICAgcmV0dXJuOw0KICAgICAgfSBlbHNlIHsNCiAgICAgICAgLy8g6I635Y+W6aqM6K+B56CB5YCS6K6h5pe2DQogICAgICAgIHRoaXMudG90YWxUaW1lLS07DQogICAgICAgIGxldCB0aW1lSUQgPSBzZXRJbnRlcnZhbCgoKSA9PiB7DQogICAgICAgICAgdGhpcy50b3RhbFRpbWUtLTsNCiAgICAgICAgICBpZiAodGhpcy50b3RhbFRpbWUgPD0gMCkgew0KICAgICAgICAgICAgY2xlYXJJbnRlcnZhbCh0aW1lSUQpOw0KICAgICAgICAgICAgdGhpcy50b3RhbFRpbWUgPSA2MDsNCiAgICAgICAgICB9DQogICAgICAgIH0sIDEwMDApOw0KICAgICAgICAvLyDosIPnlKjlj5HpgIHor7fmsYLmlrnms5UNCiAgICAgICAgZ2V0UGhvbmVDb2RlKHsNCiAgICAgICAgICBjb2RlOiB0aGlzLmZvcm0uY29kZSwNCiAgICAgICAgICBwaG9uZTogdGhpcy5mb3JtLnBob25lDQogICAgICAgIH0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAvL+aIkOWKn+Wbnuiwgw0KICAgICAgICAgIC8vIHdpbmRvdy5jb25zb2xlLmxvZyhyZXMpDQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5kYXRhLmNhcHRjaGEgKyAiIik7DQogICAgICAgIH0pOw0KICAgICAgfQ0KICAgIH0NCiAgfQ0KfTsNCg=="},{"version":3,"sources":["register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"register.vue","sourceRoot":"src/view/login","sourcesContent":["<template>\r\n  <el-dialog\r\n    title=\"用户注册\"\r\n    :visible.sync=\"dialogVisible\"\r\n    width=\"600px\"\r\n    :show-close=\"false\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n  >\r\n    <div slot=\"title\" class=\"title\">用户注册</div>\r\n    <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\" ref=\"form\">\r\n      <el-form-item label=\"头像\" prop=\"avatar\">\r\n        <el-upload\r\n          class=\"avatar-uploader\"\r\n          :action=\"baseURL+'/uploads'\"\r\n          name=\"image\"\r\n          :show-file-list=\"false\"\r\n          :on-success=\"handleAvatarSuccess\"\r\n          :before-upload=\"beforeAvatarUpload\"\r\n        >\r\n          <img v-if=\"imageUrl\" :src=\"imageUrl\" class=\"avatar\" />\r\n          <i v-else class=\"el-icon-plus avatar-uploader-icon\"></i>\r\n        </el-upload>\r\n      </el-form-item>\r\n      <el-form-item label=\"昵称\" prop=\"username\">\r\n        <el-input v-model=\"form.username\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"邮箱\" prop=\"email\">\r\n        <el-input v-model=\"form.email\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"手机\" prop=\"phone\">\r\n        <el-input v-model=\"form.phone\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"密码\" prop=\"password\">\r\n        <el-input v-model=\"form.password\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"图形码\">\r\n        <el-row>\r\n          <el-col :span=\"17\">\r\n            <el-input v-model=\"form.code\"></el-input>\r\n          </el-col>\r\n          <el-col :span=\"6\" :offset=\"1\">\r\n            <img\r\n              :src=\"codeUrl\"\r\n              style=\"width: 100%;height: 40px;\"\r\n              alt\r\n              class=\"imgKey\"\r\n              @click=\"changeImg\"\r\n            />\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n      <el-form-item label=\"验证码\">\r\n        <el-row>\r\n          <el-col :span=\"17\">\r\n            <el-input v-model=\"form.rcode\"></el-input>\r\n          </el-col>\r\n          <el-col :span=\"6\" :offset=\"1\">\r\n            <el-button @click=\"getCode\" :disabled=\"totalTime!=60\">\r\n              获取验证码\r\n              <span v-if=\"totalTime!=60\">{{totalTime}}</span>\r\n            </el-button>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form-item>\r\n    </el-form>\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n      <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n    </span>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { getPhoneCode, register } from \"@/api/register\";\r\nexport default {\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      baseURL: process.env.VUE_APP_URL,\r\n      imageUrl: \"\",\r\n      codeUrl: process.env.VUE_APP_URL + \"/captcha?type=sendsms\",\r\n      totalTime: 60,\r\n      form: {\r\n        avatar: \"\",\r\n        username: \"\",\r\n        email: \"\",\r\n        phone: \"\",\r\n        password: \"\",\r\n        code: \"\",\r\n        rcode: \"\"\r\n      },\r\n      // 验证规则\r\n      rules: {\r\n        username: [\r\n          { required: true, message: \"请输入昵称\", trigger: \"change\" }\r\n        ],\r\n        phone: [\r\n          { required: true, message: \"请输入手机号\", trigger: \"change\" },\r\n          //  自定义规则验证\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let _deg = /^(0|86|17951)?(13[0-9]|15[012356789]|166|17[3678]|18[0-9]|14[57])[0-9]{8}$/;\r\n              if (_deg.test(value)) {\r\n                callback();\r\n              } else {\r\n                callback(\"请输入正确的手机号\");\r\n              }\r\n            },\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        email: [\r\n          { required: true, message: \"请输入邮箱\", trigger: \"change\" },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let _deg = /\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*/;\r\n              if (_deg.test(value)) {\r\n                callback();\r\n              } else {\r\n                callback(\"请输入正确的邮箱格式\");\r\n              }\r\n            },\r\n            trigger: \"change\"\r\n          }\r\n        ],\r\n        password: [\r\n          { required: true, message: \"请输入密码\", trigger: \"change\" },\r\n          {\r\n            validator: (rule, value, callback) => {\r\n              let _deg = /^\\w+$/;\r\n              if (_deg.test(value)) {\r\n                callback();\r\n              } else {\r\n                callback(\"密码只能由英文,数字,下划线组成\");\r\n              }\r\n            },\r\n            trigger: \"change\"\r\n          },\r\n          { min: 6, max: 12, message: \"请输入6-12位密码\", trigger: \"change\" }\r\n        ],\r\n        avatar: [{ required: true, message: \"请上传头像\", trigger: \"change\" }],\r\n        code: [{ required: true, message: \"请输入图形码\", trigger: \"change\" }],\r\n        rcode: [{ required: true, message: \"请输入验证码\", trigger: \"change\" }]\r\n      }\r\n    };\r\n  },\r\n    watch: {\r\n      dialogVisible(newVal) {\r\n        if (newVal == false) {\r\n          this.$refs.form.resetFields();\r\n          this.imageUrl = \"\";\r\n        }\r\n      }\r\n    },\r\n  methods: {\r\n    handleAvatarSuccess(res) {\r\n      this.imageUrl = this.baseURL + \"/\" + res.data.file_path;\r\n      this.form.avatar = res.data.file_path;\r\n      //  根据头像是否上传来判断是否显示提示\r\n      this.$refs.form.validateField(\"avatar\");\r\n      // console.log(res);\r\n    },\r\n    beforeAvatarUpload(file) {\r\n      const isJPG =\r\n        file.type === \"image/jpeg\" ||\r\n        file.type === \"image/png\" ||\r\n        file.type === \"image/gif\";\r\n      const isLt2M = file.size / 1024 / 1024 < 2;\r\n      if (!isJPG) {\r\n        this.$message.error(\"上传头像图片只能是 JPG 格式!\");\r\n      }\r\n      if (!isLt2M) {\r\n        this.$message.error(\"上传头像图片大小不能超过 2MB!\");\r\n      }\r\n      return isJPG && isLt2M;\r\n    },\r\n    changeImg() {\r\n      this.codeUrl =\r\n        process.env.VUE_APP_URL + \"/captcha?type=login&t=\" + Date.now();\r\n    },\r\n    submit() {\r\n      this.$refs.form.validate(valid => {\r\n        // window.console.log(valid);\r\n        if (valid) {\r\n          //  调用发送请求方法\r\n          register(this.form).then(() => {\r\n            // window.console.log(res);\r\n            this.$message.success(\"注册成功!\");\r\n            this.dialogVisible = false;\r\n          });\r\n        }\r\n      });\r\n    },\r\n    getCode() {\r\n      let _pass = true;\r\n      this.$refs.form.validateField([\"code\", \"phone\"], error => {\r\n        if (error != \"\") {\r\n          _pass = false;\r\n        }\r\n      });\r\n      if (_pass == false) {\r\n        return;\r\n      } else {\r\n        // 获取验证码倒计时\r\n        this.totalTime--;\r\n        let timeID = setInterval(() => {\r\n          this.totalTime--;\r\n          if (this.totalTime <= 0) {\r\n            clearInterval(timeID);\r\n            this.totalTime = 60;\r\n          }\r\n        }, 1000);\r\n        // 调用发送请求方法\r\n        getPhoneCode({\r\n          code: this.form.code,\r\n          phone: this.form.phone\r\n        }).then(res => {\r\n          //成功回调\r\n          // window.console.log(res)\r\n          this.$message.success(res.data.captcha + \"\");\r\n        });\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style>\r\n.el-dialog__header {\r\n  background-color: #109dfa;\r\n  line-height: 35px;\r\n  color: #fff;\r\n  text-align: center;\r\n  font-size: 20px;\r\n}\r\n.el-dialog__footer {\r\n  text-align: center;\r\n}\r\n.avatar-uploader {\r\n  text-align: center;\r\n}\r\n.avatar-uploader .el-upload {\r\n  border: 1px dashed #d9d9d9;\r\n  border-radius: 6px;\r\n  cursor: pointer;\r\n  position: relative;\r\n  overflow: hidden;\r\n}\r\n\r\n.avatar-uploader .el-upload:hover {\r\n  border-color: #409eff;\r\n}\r\n\r\n.avatar-uploader-icon {\r\n  font-size: 28px;\r\n  color: #8c939d;\r\n  width: 178px;\r\n  height: 178px;\r\n  line-height: 178px;\r\n  text-align: center;\r\n}\r\n\r\n.avatar {\r\n  width: 178px;\r\n  height: 178px;\r\n  display: block;\r\n}\r\n</style>"]}]}