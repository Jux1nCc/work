{"remainingRequest":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\home\\question\\question.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\home\\question\\question.vue","mtime":1594991722763},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5xdWVzdGlvbiB7DQogIC5yZWQgew0KICAgIGNvbG9yOiByZWQ7DQogIH0NCiAgLnBhZ2VCb3ggew0KICAgIHRleHQtYWxpZ246IGNlbnRlcjsNCiAgICBtYXJnaW4tdG9wOiAzMHB4Ow0KICB9DQp9DQo="},{"version":3,"sources":["question.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"question.vue","sourceRoot":"src/view/home/question","sourcesContent":["<template>\r\n  <div class=\"question\">\r\n    <el-card style=\"margin-bottom:20px\">\r\n      <el-form label-width=\"80px\" :model=\"form\" ref=\"form\">\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"学科\" prop=\"subject\">\r\n              <el-select placeholder=\"请选择学科\" v-model=\"form.subject\">\r\n                <el-option\r\n                  v-for=\"(item, index) in subject\"\r\n                  :value=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :key=\"index\"\r\n                  v-show=\"item.status==1\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"阶段\" prop=\"step\">\r\n              <el-select placeholder=\"请选择阶段\" v-model=\"form.step\">\r\n                <el-option\r\n                  v-for=\"(item, index, key) in stepObj\"\r\n                  :key=\"index\"\r\n                  :value=\"+key\"\r\n                  :label=\"item\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"企业\" prop=\"enterprise\">\r\n              <el-select placeholder=\"请选择企业\" v-model=\"form.enterprise\">\r\n                <el-option\r\n                  v-for=\"(item, index) in business\"\r\n                  :value=\"item.id\"\r\n                  :label=\"item.name\"\r\n                  :key=\"index\"\r\n                  v-show=\"item.status==1\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"题型\" prop=\"type\">\r\n              <el-select placeholder=\"请选择题型\" v-model=\"form.type\">\r\n                <el-option\r\n                  v-for=\"(item, index, key) in typeObj\"\r\n                  :key=\"index\"\r\n                  :value=\"+key\"\r\n                  :label=\"item\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"难度\" prop=\"difficulty\">\r\n              <el-select placeholder=\"请选择难度\" v-model=\"form.difficulty\">\r\n                <el-option\r\n                  v-for=\"(item, index, key) in difficult\"\r\n                  :key=\"index\"\r\n                  :value=\"+key\"\r\n                  :label=\"item\"\r\n                ></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"作者\" prop=\"username\">\r\n              <el-input v-model=\"form.username\"></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"状态\" prop=\"status\">\r\n              <el-select placeholder=\"请选择状态\" v-model=\"form.status\">\r\n                <el-option label=\"启用\" value=\"1\"></el-option>\r\n                <el-option label=\"禁用\" value=\"0\"></el-option>\r\n              </el-select>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"5\">\r\n            <el-form-item label=\"日期\" prop=\"create_date\">\r\n              <el-date-picker type=\"date\" placeholder=\"选择日期\" v-model=\"form.create_date\"></el-date-picker>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n        <el-row>\r\n          <el-col :span=\"10\">\r\n            <el-form-item label=\"标题\">\r\n              <el-input></el-input>\r\n            </el-form-item>\r\n          </el-col>\r\n          <el-col :span=\"10\">\r\n            <el-form-item label-width=\"10px\">\r\n              <el-button type=\"primary\" @click=\"search\">搜索</el-button>\r\n              <el-button @click=\"reset\">清除</el-button>\r\n              <el-button type=\"primary\" class=\"el-icon-plus\" @click=\"add\">新增试题</el-button>\r\n            </el-form-item>\r\n          </el-col>\r\n        </el-row>\r\n      </el-form>\r\n    </el-card>\r\n    <el-card>\r\n      <el-table border :data=\"tableData\">\r\n        <el-table-column label=\"序号\">\r\n          <template slot-scope=\"scope\">{{(pagination.current-1)*pagination.pageSize+scope.$index+1}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"题目\" prop=\"title\">\r\n          <template slot-scope=\"scope\">\r\n            <div v-html=\"scope.row.title\"></div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"学科.阶段\" prop=\"subject_name+'.'+step\">\r\n          <template slot-scope=\"scope\">{{scope.row.subject_name}}.{{stepObj[scope.row.step]}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"题型\" prop=\"type\">\r\n          <template slot-scope=\"scope\">{{typeObj[scope.row.type]}}</template>\r\n        </el-table-column>\r\n        <el-table-column label=\"企业\" prop=\"enterprise_name\"></el-table-column>\r\n        <el-table-column label=\"创建者\" prop=\"username\"></el-table-column>\r\n        <el-table-column label=\"状态\" prop=\"status\">\r\n          <template slot-scope=\"scope\">\r\n            <div :class=\"{red:scope.row.status==0}\">{{scope.row.status==1?'启用':'禁用'}}</div>\r\n          </template>\r\n        </el-table-column>\r\n        <el-table-column label=\"访问量\" prop=\"reads\"></el-table-column>\r\n        <el-table-column label=\"操作\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button type=\"text\" @click=\"edit(scope.row)\">编辑</el-button>\r\n            <el-button\r\n              type=\"text\"\r\n              @click=\"setStatus(scope.row.id)\"\r\n              :class=\"{red:scope.row.status==1}\"\r\n            >{{scope.row.status==0?'启用':'禁用'}}</el-button>\r\n            <el-button type=\"text\" @click=\"remove(scope.row.id)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <div class=\"pageBox\">\r\n        <el-pagination\r\n          @size-change=\"sizeChange\"\r\n          @current-change=\"currentChange\"\r\n          :current-page=\"pagination.current\"\r\n          :page-size=\"pagination.pageSize\"\r\n          :total=\"pagination.total\"\r\n          :page-sizes=\"[1,2,3,4]\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n        ></el-pagination>\r\n      </div>\r\n    </el-card>\r\n    <addQuestion \r\n    :mode=\"mode\"\r\n     ref=\"addQuestion\" \r\n     :subject='subject' \r\n     :business='business' \r\n     :stepObj='stepObj'\r\n     :typeObj='typeObj'\r\n     :difficult='difficult'\r\n     ></addQuestion>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport addQuestion from \"./addQuestion\";\r\nimport { getSubjectData } from \"@/api/subject\";\r\nimport { getBusinessData } from \"@/api/business\";\r\nimport {\r\n  getQuestionData,\r\n  setQuestionStatus,\r\n  removeQuestionData\r\n} from \"@/api/question\";\r\nexport default {\r\n  components: {\r\n    addQuestion\r\n  },\r\n  created() {\r\n    // 获取选择框学科数据\r\n    getSubjectData({ limit: 1000 }).then(res => {\r\n      // window.console.log(res)\r\n      this.subject = res.data.items;\r\n    }),\r\n      // 获取选择框企业数据\r\n      getBusinessData({ limit: 1000 }).then(res => {\r\n        // window.console.log(res)\r\n        this.business = res.data.items;\r\n      }),\r\n      this.getData();\r\n  },\r\n  data() {\r\n    return {\r\n      form: {\r\n        title: \"\", // 标题名称\r\n        subject: \"\", // 学科ID\r\n        enterprise: \"\", // 企业ID\r\n        type: \"\", // 题目类型\r\n        step: \"\", // 题目阶段\r\n        username: \"\", // 作者\r\n        status: \"\", // 状态\r\n        difficulty: \"\", // 题目难度\r\n        create_date: \"\" // 创建日期\r\n      },\r\n      pagination: {\r\n        current: 1,\r\n        pageSize: 3,\r\n        total: 6\r\n      },\r\n      mode: \"add\",\r\n      tableData: [], // 表格数据\r\n      subject: [], // 学科数据\r\n      business: [], // 企业数据\r\n      stepObj: { 1: \"初级\", 2: \"中级\", 3: \"高级\" }, // 题目阶段\r\n      typeObj: { 1: \"单选\", 2: \"多选\", 3: \"简答\" }, // 题目类型\r\n      difficult: { 1: \"简单\", 2: \"一般\", 3: \"困难\" } // 题目难度\r\n    };\r\n  },\r\n  methods: {\r\n    sizeChange(size) {\r\n      this.pagination.pageSize = size;\r\n      this.search();\r\n    },\r\n    currentChange(page) {\r\n      this.pagination.current = page;\r\n      this.getData();\r\n    },\r\n    getData() {\r\n      let _params = {\r\n        page: this.pagination.currentPage,\r\n        limit: this.pagination.pageSize,\r\n        ...this.form\r\n      };\r\n      getQuestionData(_params).then(res => {\r\n        // window.console.log(res);\r\n        this.tableData = res.data.items;\r\n        this.pagination.total = res.data.pagination.total;\r\n      });\r\n    },\r\n    // 搜索\r\n    search() {\r\n      this.pagination.current = 1;\r\n      this.getData();\r\n    },\r\n    // 设置状态\r\n    setStatus(id) {\r\n      setQuestionStatus({ id }).then(() => {\r\n        this.$message.success(\"状态设置成功\");\r\n        this.search();\r\n      });\r\n    },\r\n    // 删除\r\n    remove(id) {\r\n      this.$confirm(\"此项操作将删除该条数据,是否删除?\", \"温馨提示!\", {\r\n        confirmButtonText: \"确认\",\r\n        cancelButtonText: \"取消\",\r\n        type: \"info\"\r\n      })\r\n        .then(() => {\r\n          removeQuestionData({ id }).then(() => {\r\n            this.$message.success(\"删除成功!\");\r\n            this.search();\r\n          });\r\n        })\r\n        .catch(() => {\r\n          this.$message.info(\"已取消删除!\");\r\n        });\r\n    },\r\n    // 清空\r\n    reset() {\r\n      this.$refs.form.resetFields();\r\n      this.search();\r\n    },\r\n    add() {\r\n      this.mode = \"add\";\r\n      this.$refs.addQuestion.form = {\r\n        title: \"\", // 标题\r\n        subject: \"\", // 学科ID标识\r\n        step: \"\", // 阶段 1初级, 2中级, 3高级\r\n        enterprise: \"\", // 企业ID标识\r\n        city: [], // [省,市,区]\r\n        type: 1, // 题型 1单选, 2多选, 3简答\r\n        difficulty: 1, // 题目难度 1简单, 2一般, 3困难\r\n        single_select_answer: \"\", // 单选题答案\r\n        multiple_select_answer: [], // 多选题答案\r\n        short_answer: \"\", // 简单题答案\r\n        video: \"\", // 视频解析地址\r\n        answer_analyze: \"\", // 答案解析\r\n        remark: \"\", // 答案备注\r\n        select_options: [\r\n          // 选项,介绍,图片介绍\r\n          {\r\n            label: \"A\",\r\n            text: \"狗不理\",\r\n            image: \"\"\r\n          },\r\n          {\r\n            label: \"B\",\r\n            text: \"猫不理\",\r\n            image: \"\"\r\n          },\r\n          {\r\n            label: \"C\",\r\n            text: \"麻花\",\r\n            image: \"\"\r\n          },\r\n          {\r\n            label: \"D\",\r\n            text: \"炸酱面\",\r\n            image: \"\"\r\n          }\r\n        ]\r\n      };\r\n      this.$refs.addQuestion.dialogVisible = true;\r\n    },\r\n    edit(row) {\r\n      this.mode = \"edit\";\r\n      this.$refs.addQuestion.form = JSON.parse(JSON.stringify(row));\r\n      this.$refs.addQuestion.dialogVisible = true;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less'>\r\n.question {\r\n  .red {\r\n    color: red;\r\n  }\r\n  .pageBox {\r\n    text-align: center;\r\n    margin-top: 30px;\r\n  }\r\n}\r\n</style>"]}]}