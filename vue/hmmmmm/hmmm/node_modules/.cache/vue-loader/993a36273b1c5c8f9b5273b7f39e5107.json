{"remainingRequest":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\home\\subject\\addSubject.vue?vue&type=style&index=0&lang=less&","dependencies":[{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\src\\view\\home\\subject\\addSubject.vue","mtime":1594975506445},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCg0KLmVsLWRpYWxvZ19faGVhZGVyYnRuIC5lbC1kaWFsb2dfX2Nsb3NlIHsNCiAgY29sb3I6ICNmZmY7DQp9DQo="},{"version":3,"sources":["addSubject.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4FA;AACA;AACA","file":"addSubject.vue","sourceRoot":"src/view/home/subject","sourcesContent":["<template>\r\n  <el-dialog\r\n    :visible.sync=\"dialogVisible\"\r\n    :show-close=\"true\"\r\n    width=\"600px\"\r\n    :close-on-click-modal=\"false\"\r\n    :close-on-press-escape=\"false\"\r\n  >\r\n    <div slot=\"title\" class=\"title\">{{mode=='add'?'新增学科':'编辑学科'}}</div>\r\n    <el-form label-width=\"80px\" :model=\"form\" :rules=\"rules\" ref=\"form\">\r\n      <el-form-item label=\"学科编号\" prop=\"rid\">\r\n        <el-input v-model=\"form.rid\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"学科名称\" prop=\"name\">\r\n        <el-input v-model=\"form.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"学科简称\" prop=\"short_name\">\r\n        <el-input v-model=\"form.short_name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"学科简介\" prop=\"intro\">\r\n        <el-input v-model=\"form.intro\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"学科备注\" prop=\"remark\">\r\n        <el-input v-model=\"form.remark\"></el-input>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div slot=\"footer\" class=\"dialog-footer\">\r\n      <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n      <el-button type=\"primary\" @click=\"submit\">确定</el-button>\r\n    </div>\r\n  </el-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { addSubjectData, editSubjectData } from \"@/api/subject\";\r\nexport default {\r\n  props: {\r\n    mode: String\r\n  },\r\n  data() {\r\n    return {\r\n      dialogVisible: false,\r\n      form: {\r\n        rid: \"\",\r\n        name: \"\",\r\n        short_name: \"\",\r\n        intro: \"\",\r\n        remark: \"\"\r\n      },\r\n      rules: {\r\n        rid: [{ required: true, message: \"请输入学科编号\", trigger: \"change\" }],\r\n        name: [{ required: true, message: \"请输入学科名称\", trigger: \"change\" }]\r\n      }\r\n    };\r\n  },\r\n  watch: {\r\n    dialogVisible(newVal) {\r\n      if (newVal == false) {\r\n        this.$refs.form.resetFields();\r\n      }\r\n    },\r\n    mode() {\r\n      this.$nextTick(() => {\r\n        this.$refs.form.clearValidate();\r\n      });\r\n    }\r\n  },\r\n  methods: {\r\n    submit() {\r\n      this.$refs.form.validate(res => {\r\n        if (res) {\r\n          if (this.mode == \"add\") {\r\n            addSubjectData(this.form).then(() => {\r\n              this.$message.success(\"新增成功!\");\r\n              this.dialogVisible = false;\r\n              this.$emit(\"search\");\r\n            });\r\n          } else {\r\n            editSubjectData(this.form).then(() => {\r\n              this.$message.success(\"编辑成功!\");\r\n              this.dialogVisible = false;\r\n              this.$emit(\"search\");\r\n            });\r\n          }\r\n        }\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang='less'>\r\n.el-dialog__headerbtn .el-dialog__close {\r\n  color: #fff;\r\n}\r\n</style>"]}]}