{"remainingRequest":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\babel-loader\\lib\\index.js!D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\activity\\vue\\hmmmmm\\hmmm\\src\\utils\\request.js","dependencies":[{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\src\\utils\\request.js","mtime":1595074353611},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\activity\\vue\\hmmmmm\\hmmm\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICdlbGVtZW50LXVpJzsKaW1wb3J0IHsgZ2V0VG9rZW4sIHJlbW92ZVRva2VuIH0gZnJvbSAnLi90b2tlbi5qcyc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvcm91dGVyLmpzJzsgLy8g5Yib5bu65Ymv5pysCgp2YXIgaW5zdGFuY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfVVJMLAogIHdpdGhDcmVkZW50aWFsczogdHJ1ZSAvL+i3qOWfn+aQuuW4pmNvb2tpZQoKfSk7IC8vIOa3u+WKoOivt+axguaLpuaIquWZqAoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGZ1bmN0aW9uIChjb25maWcpIHsKICAvLyDlnKjlj5HpgIHor7fmsYLkuYvliY3lgZrkupvku4DkuYgKICBpZiAoZ2V0VG9rZW4oKSkgewogICAgLy8g5re75Yqg6K+35rGC5aS0LOiuvue9rnRva2VuCiAgICBjb25maWcuaGVhZGVycy50b2tlbiA9IGdldFRva2VuKCk7CiAgfQoKICByZXR1cm4gY29uZmlnOwp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICAvLyDlr7nor7fmsYLplJnor6/lgZrkupvku4DkuYgKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5re75Yqg5ZON5bqU5oum5oiq5ZmoCgppbnN0YW5jZS5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIC8vIOWvueWTjeW6lOaVsOaNruWBmueCueS7gOS5iAogIC8vIHJldHVybiByZXNwb25zZTsKICBpZiAocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMCkgewogICAgLy8g6L+U5Zue5pWw5o2u5q2j56GuCiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsgLy8gfWVsc2UgaWYocmVzcG9uc2UuZGF0YS5jb2RlID09IDIwMil7CiAgICAvLyAgICAgTWVzc2FnZS5lcnJvcihyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogICAgLy8gICAgIHJldHVybiBQcm9taXNlLnJlamVjdCgnZXJyb3InKTsKICB9IGVsc2UgaWYgKHJlc3BvbnNlLmRhdGEuY29kZSA9PSAyMDYpIHsKICAgIC8vIE1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgIHJvdXRlci5wdXNoKCcvJyk7CiAgICByZW1vdmVUb2tlbigpOwogICAgcmV0dXJuIFByb21pc2UucmVqZWN0KCdlcnJvcicpOwogIH0gZWxzZSB7CiAgICAvLyDmj5DnpLrplJnor68KICAgIE1lc3NhZ2UuZXJyb3IocmVzcG9uc2UuZGF0YS5tZXNzYWdlKTsKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChyZXNwb25zZS5kYXRhLm1lc3NhZ2UpOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgLy8g5a+55ZON5bqU6ZSZ6K+v5YGa54K55LuA5LmICiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycm9yKTsKfSk7CmV4cG9ydCBkZWZhdWx0IGluc3RhbmNlOw=="},{"version":3,"sources":["D:/activity/vue/hmmmmm/hmmm/src/utils/request.js"],"names":["axios","Message","getToken","removeToken","router","instance","create","baseURL","process","env","VUE_APP_URL","withCredentials","interceptors","request","use","config","headers","token","error","Promise","reject","response","data","code","push","message"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,SAASC,QAAT,EAAmBC,WAAnB,QAAsC,YAAtC;AACA,OAAOC,MAAP,MAAmB,oBAAnB,C,CAEA;;AACA,IAAMC,QAAQ,GAAGL,KAAK,CAACM,MAAN,CAAa;AAC1BC,EAAAA,OAAO,EAAEC,OAAO,CAACC,GAAR,CAAYC,WADK;AAE1BC,EAAAA,eAAe,EAAE,IAFS,CAEF;;AAFE,CAAb,CAAjB,C,CAKA;;AACAN,QAAQ,CAACO,YAAT,CAAsBC,OAAtB,CAA8BC,GAA9B,CAAkC,UAAUC,MAAV,EAAkB;AAChD;AACA,MAAIb,QAAQ,EAAZ,EAAgB;AACZ;AACAa,IAAAA,MAAM,CAACC,OAAP,CAAeC,KAAf,GAAuBf,QAAQ,EAA/B;AACH;;AACD,SAAOa,MAAP;AACH,CAPD,EAOG,UAAUG,KAAV,EAAiB;AAChB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAVD,E,CAYA;;AACAb,QAAQ,CAACO,YAAT,CAAsBS,QAAtB,CAA+BP,GAA/B,CAAmC,UAAUO,QAAV,EAAoB;AACnD;AACA;AACA,MAAIA,QAAQ,CAACC,IAAT,CAAcC,IAAd,IAAsB,GAA1B,EAA+B;AAC3B;AACA,WAAOF,QAAQ,CAACC,IAAhB,CAF2B,CAG3B;AACA;AACA;AACH,GAND,MAMO,IAAID,QAAQ,CAACC,IAAT,CAAcC,IAAd,IAAsB,GAA1B,EAA+B;AAClC;AACAnB,IAAAA,MAAM,CAACoB,IAAP,CAAY,GAAZ;AACArB,IAAAA,WAAW;AACX,WAAOgB,OAAO,CAACC,MAAR,CAAe,OAAf,CAAP;AACH,GALM,MAKA;AACH;AACAnB,IAAAA,OAAO,CAACiB,KAAR,CAAcG,QAAQ,CAACC,IAAT,CAAcG,OAA5B;AACA,WAAON,OAAO,CAACC,MAAR,CAAeC,QAAQ,CAACC,IAAT,CAAcG,OAA7B,CAAP;AACH;AACJ,CAnBD,EAmBG,UAAUP,KAAV,EAAiB;AAChB;AACA,SAAOC,OAAO,CAACC,MAAR,CAAeF,KAAf,CAAP;AACH,CAtBD;AAwBA,eAAeb,QAAf","sourcesContent":["import axios from 'axios'\r\nimport { Message } from 'element-ui';\r\nimport { getToken, removeToken } from './token.js'\r\nimport router from '@/router/router.js'\r\n\r\n// 创建副本\r\nconst instance = axios.create({\r\n    baseURL: process.env.VUE_APP_URL,\r\n    withCredentials: true   //跨域携带cookie\r\n})\r\n\r\n// 添加请求拦截器\r\ninstance.interceptors.request.use(function (config) {\r\n    // 在发送请求之前做些什么\r\n    if (getToken()) {\r\n        // 添加请求头,设置token\r\n        config.headers.token = getToken();\r\n    }\r\n    return config;\r\n}, function (error) {\r\n    // 对请求错误做些什么\r\n    return Promise.reject(error);\r\n});\r\n\r\n// 添加响应拦截器\r\ninstance.interceptors.response.use(function (response) {\r\n    // 对响应数据做点什么\r\n    // return response;\r\n    if (response.data.code == 200) {\r\n        // 返回数据正确\r\n        return response.data;\r\n        // }else if(response.data.code == 202){\r\n        //     Message.error(response.data.message);\r\n        //     return Promise.reject('error');\r\n    } else if (response.data.code == 206) {\r\n        // Message.error(response.data.message);\r\n        router.push('/');\r\n        removeToken();\r\n        return Promise.reject('error');\r\n    } else {\r\n        // 提示错误\r\n        Message.error(response.data.message);\r\n        return Promise.reject(response.data.message);\r\n    }\r\n}, function (error) {\r\n    // 对响应错误做点什么\r\n    return Promise.reject(error);\r\n});\r\n\r\nexport default instance"]}]}