;/*!wap:component/common/util/videoAction.js*/
define("wap:component/common/util/videoAction",function(e,o,n){function a(){r.posterPage=i.find(".poster-page"),r.playerContainer=i.find(".player-container"),r.player=i.find(".player"),r.playerPoster=i.find(".player-poster"),r.loading=i.find(".loading-spinner"),r.playBtn=i.find(".video-play-btn"),r.replayMask=i.find(".replay-mask"),r.replayBtn=i.find(".replay-btn"),r.replayDownload=i.find(".replay-download"),$bottomDlBanner=$("#bottomDlBannerWrapper"),$topDlBanner=$("#topDlBannerWrapper")}function t(e){try{e="閲嶆挱",r.replayBtn.text(e),r.replayMask.show(),setTimeout(function(){r.replayMask.addClass("showing")},10)}catch(o){console.log(o)}}var i=null,l=null,r={},p=!1,s=!1,d=null,c=null,y=null,u=null,f={init:function(e,o){var n=this;i=$(e),l=$.extend(!0,{},o),a();var f=function(){var e=$(".poster-link");if(!(e.length<=0)){var o=r.player.data("src"),n=r.player.data("poster-src");u=$("<video>",{"class":"video-player",src:o,poster:n,type:"video/mp4",controls:"false",width:"100%",height:l.videoH+"px",preload:"auto","webkit-playsinline":"",playsinline:"","x5-video-player-type":"h5"}),r.player.empty().append(u),u.css({top:"9999px"}),u.on("error",function(){r.player.empty(),u=null})}};f();var h=function(e){var o=$(e.target);if(o.closest(".poster-link").length>0){if($postLink=o.closest(".poster-link"),Common.Util.stopEvent(e),l.is_ga&&gaevent($postLink.data("category"),$postLink.data("action"),$postLink.data("label")),!u){var a=r.player.data("src"),i=r.player.data("poster-src");u=$("<video>",{"class":"video-player",src:a,poster:i,type:"video/mp4",controls:"false",width:"100%",height:l.videoH+"px",preload:"auto","webkit-playsinline":"",playsinline:"","x5-video-player-type":"h5"}),r.player.empty().append(u)}u.css({top:l.videoTop}),r.posterPage.hide(),r.playerContainer.show(),r.loading.show(),u[0].play(),$.isFunction(l.startPlayCb)&&l.startPlayCb(),$bottomDlBanner.removeClass("fix-bottom-banner"),y=u;try{u.on("timeupdate",function(){clearTimeout(d);var e=u[0].currentTime;0==e||p||(r.loading.hide(),r.playerPoster.hide(),$topDlBanner.hide(),p=!0)}),u.on("pause",function(){n.videoPause()}),u.on("error",function(){r.loading.hide()}),d=setTimeout(function(){r.playerPoster.hide(),r.loading.hide()},8e3),u.on("ended",function(){$.os.ios||(r.playerPoster.show(),u.css({top:"9999px"})),s=!0,r.playBtn.hide(),t(),$.isFunction(l.endPlayCb)&&l.endPlayCb(),listener.trigger("com.huoshan.reflow.video","set-bar",{"v-state":"ended"})})}catch(e){Raven.captureException(e)}var f=function(){return s=!1,listener.trigger("com.huoshan.reflow.video","set-bar",{"v-state":"replay"}),r.playerPoster.hide(),$.os.ios?u.show():u.css({top:l.videoTop}),u[0].error&&u[0].load(),c?!1:void(c=setTimeout(function(){if(c=null,r.replayMask.hide(),u[0].paused)u[0].play();else{try{u[0].pause()}catch(e){console.log(e)}u[0].play()}},150))};r.replayBtn.off("click").on("click",f),r.replayDownload.off("click").on("click",function(e){var o=$(e.currentTarget).data("app-download-position"),n=window.getDownloadUrlByPosition(o);"function"==typeof l.handlerDownload?l.handlerDownload(n):location.href=n}),r.replayMask.off("click").on("click",function(e){Common.Util.stopEvent(e)}),r.playBtn.off("click").on("click",function(){u[0].play(),r.playBtn.hide(),$.os.ios||(r.playerPoster.hide(),u.css({top:l.videoTop}))})}};i.off("click",".poster-page",h).on("click",".poster-page",h),listener.on("com.huoshan.video","pause",function(){y&&(y[0].paused&&s||y[0].pause(),$.os.ios||(r.playerPoster.show(),y.css({top:"9999px"})),n.videoPause())})},videoPause:function(){y[0].played&&y[0].pause(),s||r.playBtn.show()}};n.exports=f});
;/*!wap:component/common/util/weixinUtil.js*/
define("wap:component/common/util/weixinUtil",function(e,n,t){function i(){var e=v();return $('input[name="shareLink"]').val()||e}function a(){var e="銆愮伀灞辨槦鐞冦€戞湁棰滄湁鏂欏繀椤荤伀-Huoshan.com";return e=$.trim($('input[name="shareTitle"]').val())||e}function r(){var e="鐏北鏄熺悆(Huoshan.com)锛屾槸涓€娆捐棰戠洿鎾蒋浠讹紝鍒嗕韩浣犲拰浣犵殑涓栫晫锛佸綋鐩存挱鍙樻垚涓€绉嶇敓娲绘柟寮忥紝浣犱細閬囧埌鎰熷叴瓒ｇ殑浜恒€傜伀灞辨槦鐞冿紝鏈夐鏈夋枡蹇呴』鐏紒";return e=$.trim($('input[name="shareDesc"]').val())||e}function o(){var e="";return e||(e=$("#weixinShareLogo").attr("src")),$('input[name="shareImage"]').val()||e}function s(){var e="銆愮伀灞辨槦鐞冦€戞湁棰滄湁鏂欏繀椤荤伀-Huoshan.com";return e=$.trim($('input[name="shareTimelineTitle"]').val())||$.trim($('input[name="shareTitle"]').val())||e}function c(){var e=v();return $('input[name="shareTimelineLink"]').val()||$('input[name="shareLink"]').val()||e}function u(){var e="";return e||(e=$("#weixinShareLogo").attr("src")),$('input[name="shareTimelineImage"]').val()||$('input[name="shareImage"]').val()||e}function l(){var e="銆愮伀灞辨槦鐞冦€戞湁棰滄湁鏂欏繀椤荤伀-Huoshan.com";return e=$.trim($('input[name="shareAppTitle"]').val())||$.trim($('input[name="shareTitle"]').val())||e}function h(){var e=v();return $('input[name="shareAppLink"]').val()||$('input[name="shareLink"]').val()||e}function m(){var e="鐏北鏄熺悆(Huoshan.com)锛屾槸涓€娆捐棰戠洿鎾蒋浠讹紝鍒嗕韩浣犲拰浣犵殑涓栫晫锛佸綋鐩存挱鍙樻垚涓€绉嶇敓娲绘柟寮忥紝浣犱細閬囧埌鎰熷叴瓒ｇ殑浜恒€傜伀灞辨槦鐞冿紝鏈夐鏈夋枡蹇呴』鐏紒";return e=$.trim($('input[name="ShareAppDesc"]').val())||$.trim($('input[name="shareDesc"]').val())||e}function v(){{var e=location.href;location.hash}if(location.search)if(-1==location.search.indexOf("wxshare_count="))e=Common.Util.setUrlParam(e,"wxshare_count",2);else{var n=Common.Util.getUrlParam(e,"wxshare_count")||"0";n=n?parseInt(n)+1:0,e=Common.Util.setUrlParam(e,"wxshare_count",n)}else e+="?wxshare_count=2";return e}function w(){var e=function(){var e=a(),n=r(),t=i(),v=o(),w=s(),p=c(),$=u(),g=l(),x=h(),d=m(),U=o();wx.onMenuShareTimeline({title:w,link:p,imgUrl:$,type:f.type,success:function(){"gaevent"in window&&gaevent("h5-site-events","share-to-weixin","timeline"),listener.trigger("www.huoshan.reflow","send-act",{act:"share"})},cancel:function(){}}),wx.onMenuShareAppMessage({title:g,link:x,desc:d,imgUrl:U,type:f.type,dataUrl:"",success:function(){"gaevent"in window&&gaevent("h5-site-events","share-to-weixin","app-message"),listener.trigger("www.huoshan.reflow","send-act",{act:"share"})},cancel:function(){}}),wx.onMenuShareQQ({title:e,link:t,desc:n,imgUrl:v,success:function(){"gaevent"in window&&gaevent("h5-site-events","share-to-qq"),listener.trigger("www.huoshan.reflow","send-act",{act:"share"})},cancel:function(){}})};if($.browser.weixin)if("undefined"==typeof wx){var n=$.getScript("//s3a.bytecdn.cn/huoshan/resource/wap/static/script/lib/weixin_hotsoon_839cbb7.js");n.done(function(){"undefined"!=typeof wx&&wx.onReady(function(){e()},f.weixinSetting)})}else e()}var p={ctn:$(document.body),weixinSetting:{},type:""},f={};t.exports={init:function(e){f=$.extend({},p,e),w()}}});